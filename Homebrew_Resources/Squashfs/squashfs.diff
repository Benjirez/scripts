diff --git a/squashfs-tools/mksquashfs.c b/squashfs-tools/mksquashfs.c
index 86f82bb..48c5f69 100644
--- a/squashfs-tools/mksquashfs.c
+++ b/squashfs-tools/mksquashfs.c
@@ -4401,7 +4401,7 @@ int excluded_match(char *name, struct pathname *path, struct pathnames **new)
 			regexec(path->name[i].preg, name, (size_t) 0,
 					NULL, 0) == 0 :
 			fnmatch(path->name[i].name, name,
-				FNM_PATHNAME|FNM_PERIOD|FNM_EXTMATCH) == 0;
+				FNM_PATHNAME|FNM_PERIOD) == 0;
 
 		if(match) {
 			 if(path->name[i].paths == NULL || new == NULL)
diff --git a/squashfs-tools/unsquashfs.c b/squashfs-tools/unsquashfs.c
index 1323dd6..0f603c0 100644
--- a/squashfs-tools/unsquashfs.c
+++ b/squashfs-tools/unsquashfs.c
@@ -31,7 +31,7 @@
 #include "unsquashfs_info.h"
 #include "stdarg.h"
 
-#include <sys/sysinfo.h>
+#include <sys/sysctl.h>
 #include <sys/types.h>
 #include <sys/time.h>
 #include <sys/resource.h>
@@ -1428,7 +1428,7 @@ int matches(struct pathnames *paths, char *name, struct pathnames **new)
 			int match = use_regex ?
 				regexec(path->name[i].preg, name, (size_t) 0,
 				NULL, 0) == 0 : fnmatch(path->name[i].name,
-				name, FNM_PATHNAME|FNM_PERIOD|FNM_EXTMATCH) ==
+				name, FNM_PATHNAME|FNM_PERIOD) ==
 				0;
 			if(match && path->name[i].paths == NULL)
 				/*
